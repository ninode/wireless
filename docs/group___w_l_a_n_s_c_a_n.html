<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.8.16"/>
  <title>Harmony 3 : Wireless: Scanning</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <link href="customstylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div id="titlearea">
 <table cellspacing="0" cellpadding="0">
 <tbody>
   <tr style="height: 56px;vertical-align: text-bottom;">
    <td style="padding: 0.2em 0.5em 0.1em 0.5em;">
	  <a id="projectlogo"><img alt="Logo" src="Microchip_logo.png"/> </a> </td>
     <td style="padding-right: 1em;">
       <span id="projectname"/> <class="stringliteral">Harmony 3 : Wireless </span>
     </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Scanning<div class="ingroups"><a class="el" href="group__m2m__wifi.html">WLAN</a> &raquo; <a class="el" href="group___w_l_a_n_a_p_i.html">Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Here are listed all the functions that implement the Wifi Scanning APIs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf270d6f64b704d8a13358ddf4c7f21a9"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#gaf270d6f64b704d8a13358ddf4c7f21a9">m2m_wifi_set_scan_options</a> (<a class="el" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a> *ptstrM2MScanOption)</td></tr>
<tr class="memdesc:gaf270d6f64b704d8a13358ddf4c7f21a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous API for configuring the behaviour of the WINC IC's network scanning functions.  <a href="group___w_l_a_n_s_c_a_n.html#gaf270d6f64b704d8a13358ddf4c7f21a9">More...</a><br /></td></tr>
<tr class="separator:gaf270d6f64b704d8a13358ddf4c7f21a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d536e89952ac888305ca998d1a0e561"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga4d536e89952ac888305ca998d1a0e561">m2m_wifi_set_scan_region</a> (uint16_t ScanRegion)</td></tr>
<tr class="memdesc:ga4d536e89952ac888305ca998d1a0e561"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous API for configuring the regulatory restrictions that may affect the WINC ICs scanning behaviour.  <a href="group___w_l_a_n_s_c_a_n.html#ga4d536e89952ac888305ca998d1a0e561">More...</a><br /></td></tr>
<tr class="separator:ga4d536e89952ac888305ca998d1a0e561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2af5f45922ebf76a92d108a2561cb7c9"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga2af5f45922ebf76a92d108a2561cb7c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous API to request the WINC IC to scan for networks.  <a href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">More...</a><br /></td></tr>
<tr class="separator:ga2af5f45922ebf76a92d108a2561cb7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50637fc5aa85dde7bc568fde12b6a679"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga50637fc5aa85dde7bc568fde12b6a679">m2m_wifi_request_scan_passive</a> (uint8_t ch)</td></tr>
<tr class="memdesc:ga50637fc5aa85dde7bc568fde12b6a679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a> but performs passive scanning instead of active scanning.  <a href="group___w_l_a_n_s_c_a_n.html#ga50637fc5aa85dde7bc568fde12b6a679">More...</a><br /></td></tr>
<tr class="separator:ga50637fc5aa85dde7bc568fde12b6a679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1638306107bf997ec4df62a473dba3b4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a> (void)</td></tr>
<tr class="memdesc:ga1638306107bf997ec4df62a473dba3b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the number of AP's found in the last Scan Request, The function read the number of AP's from global variable which updated in the wifi_cb in M2M_WIFI_RESP_SCAN_DONE.  <a href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">More...</a><br /></td></tr>
<tr class="separator:ga1638306107bf997ec4df62a473dba3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2846d10a1d3b587b965ab7df1df0808c"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a> (uint8_t index)</td></tr>
<tr class="memdesc:ga2846d10a1d3b587b965ab7df1df0808c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the AP information from the Scan Result list with the given index, the response received in wifi_cb M2M_WIFI_RESP_SCAN_RESULT, the response pointer should be casted with <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> structure.  <a href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">More...</a><br /></td></tr>
<tr class="separator:ga2846d10a1d3b587b965ab7df1df0808c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Here are listed all the functions that implement the Wifi Scanning APIs. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1638306107bf997ec4df62a473dba3b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1638306107bf997ec4df62a473dba3b4">&#9670;&nbsp;</a></span>m2m_wifi_get_num_ap_found()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t m2m_wifi_get_num_ap_found </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the number of AP's found in the last Scan Request, The function read the number of AP's from global variable which updated in the wifi_cb in M2M_WIFI_RESP_SCAN_DONE. </p>
<p>Synchronous API to retrieve the number of AP's found during the last scan operation.</p>
<p>Synchronous function to retrieve the number of AP's found during the last scan operation.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Return the number of AP's found in the last Scan Request. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan need to be called first </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>That function need to be called in the wifi_cb in M2M_WIFI_RESP_SCAN_DONE, calling that function in any other place will return undefined/undated numbers. Function used only in STA mode only.</dd></dl>
<p>The function reads the number of APs from global variable which was updated in the Wi-Fi callback function through the <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> event. Function used only in STA mode only.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan must be called first to ensure up to date results are available.<ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> must be handled in the callback to receive the requested scan information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function must be called only in the wi-fi callback function when the events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> or <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> are received. Calling this function in any other place will result in undefined/outdated numbers.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Return the number of AP's found in the last Scan Request.</dd></dl>
<h1><a class="anchor" id="WIFIExample7"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t    u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line"><a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line"><span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">{</div>
<div class="line">    u8ScanResultIdx = 0;</div>
<div class="line">    <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">        u8ScanResultIdx ++;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">}</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line"><a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">uint8_t           u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">    pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">    pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">    pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">    pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">    pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">    pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Read the next scan result</span></div>
<div class="line">    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">    u8ScanResultIdx ++;</div>
<div class="line">}</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line"><a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function allows the application to recover the number of access points discovered during the most recent scan activity. This is achieved via a global variable in the WINC driver that is populated when receiving the <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> event. Function to be used in STA mode only.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan must be called first to ensure up to date results are available.<ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> must be handled in the callback to receive the requested scan information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function must be called only in the wi-fi callback function when the events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> or <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> are received. Calling this function in any other place will result in undefined/outdated numbers.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of AP's found in the last Scan Request.</dd></dl>
<h1><a class="anchor" id="WIFIExample7"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a> *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                 u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function allows the application to recover the number of access points discovered during the most recent scan activity. This is achieved via a global variable in the WINC driver that is populated when receiving the M2M_WIFI_RESP_SCAN_DONE event.</p>
<dl class="section return"><dt>Returns</dt><dd>Return the number of AP's found in the last Scan Request.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>m2m_wifi_request_scan must be called first to ensure up to date results are available.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><ul>
<li>This function must be called only in the wi-fi callback function when the events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> or <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> are received. Calling this function in any other place may result in undefined/outdated numbers.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="WIFIExample7"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t  u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                     u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga2846d10a1d3b587b965ab7df1df0808c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2846d10a1d3b587b965ab7df1df0808c">&#9670;&nbsp;</a></span>m2m_wifi_req_scan_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_req_scan_result </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the AP information from the Scan Result list with the given index, the response received in wifi_cb M2M_WIFI_RESP_SCAN_RESULT, the response pointer should be casted with <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> structure. </p>
<p>Asynchronous API to request the information of an access point discovered via scanning.</p>
<p>Synchronous call to read the AP information from the SCAN Result list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a>,<a class="el" href="group___w_l_a_n_a_p_i.html#ga1638306107bf997ec4df62a473dba3b4" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a>,<a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function shall return M2M_SUCCESS for success and a negative value otherwise </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan need to be called first, then m2m_wifi_get_num_ap_found to get the number of AP's found </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Function used only in STA mode only. the scan result updated only if scan request called, else it will be cashed in firmware for the host scan request result, which mean if large delay occur between the scan request and the scan result request, the result will not be up-to-date</dd></dl>
<p>Synchronous call to read the AP information from the SCAN Result list with the given index. This function is expected to be called when the response events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> or <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> are received in the wi-fi callback function. The response information received can be obtained through the casting to the <a class="el" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a> structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga1638306107bf997ec4df62a473dba3b4" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a> needs to be called first, then m2m_wifi_get_num_ap_found to get the number of AP's found.</li>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the callback to receive the requested scan information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><ul>
<li>Function used in STA mode only. the scan results are updated only if the scan request is called.</li>
<li>Calling this function only without a scan request will lead to firmware errors.</li>
<li>Application code should refrain from introducing a large delay between the scan request and the scan result request, to prevent errors occurring.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="WIFIExample8"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t    u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                       u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a>,<a class="el" href="group___w_l_a_n_a_p_i.html#ga1638306107bf997ec4df62a473dba3b4" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a>,<a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function shall return <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for success and a negative value otherwise </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan need to be called first, then m2m_wifi_get_num_ap_found to get the number of AP's found </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Function used only in STA mode only. the scan result updated only if scan request called, else it will be cashed in firmware for the host scan request result, which mean if large delay occur between the scan request and the scan result request, the result will not be up-to-date</dd></dl>
<p>This function allows the information of any discovered access point to be retrieved. When a scan is completed, the application is informed of the number of networks (access points) discovered. Calling this function with an index, N, will return the information for the Nth access point. The information will be returned to the application via a <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> event, and the response data may be obtained through casting the pointer (pvMsg) to <a class="el" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga1638306107bf997ec4df62a473dba3b4" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a> must be called first to ensure up to date results are available.</li>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered in order to receive scan data after calling this function. Registration of the callback is done via the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the callback to receive the requested scan information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><ul>
<li>This API is valid only for STA mode, it may be called regardless of the connection state (connected or disconnected).</li>
<li>Calling this function without first issuing a scan request may lead to stale data being recovered.</li>
<li>Application code should refrain from introducing significant delays between issuing the scan request and scan result requests.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="WIFIExample8"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in the response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t    u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                       u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function allows the information of any discovered access point to be retrieved. When a scan is completed, the application is informed of the number of networks (access points) discovered. Calling this function with an index, N, will return the information for the Nth access point. The information will be returned to the application via a <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> event, and the response data may be obtained through casting the pointer (pvMsg) to <a class="el" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga1638306107bf997ec4df62a473dba3b4" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a> must be called first to ensure up to date results are available.</li>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> must be implemented and registered in order to receive scan data after calling this function. Registration of the callback is done via the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the callback to receive the requested connection information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><ul>
<li>This API is valid only for STA mode, it may be called regardless of connection state (connected or disconnected).</li>
<li>Calling this function without first issuing a scan request may lead to stale data being recovered.</li>
<li>Application code should refrain from introducing significant delays between issuing the scan request and scan result requests.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="WIFIExample8"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t  u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                     u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga2af5f45922ebf76a92d108a2561cb7c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2af5f45922ebf76a92d108a2561cb7c9">&#9670;&nbsp;</a></span>m2m_wifi_request_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_request_scan </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronous API to request the WINC IC to scan for networks. </p>
<p>Asynchronous API to request the WINC IC perform a scan for networks.</p>
<p>Asynchronous API to request the WINC to scan for networks.</p>
<p>Scan statuses are delivered to the application via the Wi-Fi event callback (<a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a>) in three stages. The first step involves the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> which, if successful, provides the number of detected networks (access points). The application must then read the list of access points via multiple calls to the asynchronous <a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a> API. For each call to this function, the application will receive (step three) the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a>, with a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a> to scan all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registration of the callback is done via <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the (tpfAppWifiCb) callback.</li>
<li>The <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This API is valid only for STA mode, it may be called regardless of connection state (connected or disconnected states).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<h1><a class="anchor" id="WIFIExample6"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a> *pstrScanResult = (<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                 u8NumFoundAPs   = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a> param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a> = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Scan statuses are delivered to the application via the Wi-Fi event callback (<a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a>) in three stages. The first step involves the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> which, if successful, provides the number of detected networks (access points). The application must then read the list of access points via multiple calls to the asynchronous <a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a> API. For each call to this function, the application will receive (step three) the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a>, with a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a> to scan all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registration of the callback is done via <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the (<a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a>) callback.</li>
<li>The <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This API is valid only for STA mode, it may be called regardless of connection state (connected or disconnected states).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<h1><a class="anchor" id="WIFIExample6"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a> *pstrScanResult = (<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                 u8NumFoundAPs   = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a> param;</div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a> = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Scan statuses are delivered to the application via the Wi-Fi event callback (<a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a>) in three stages. The first step involves the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> which, if successful, provides the number of detected networks (access points). The application must then read the list of access points via multiple calls to the asynchronous <a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a> API. For each call to this function, the application will receive (step three) the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to tenuM2mScanCh, with a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a> to scan all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This API is valid only for STA mode, it may be called regardless of connection state (connected or disconnected).</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registration of the callback is done via <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the (tpfAppWifiCb) callback.</li>
<li>The <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a> function must be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> </dd>
<dd>
<a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> </dd>
<dd>
<a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> </dd>
<dd>
<a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> </dd>
<dd>
<a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<h1><a class="anchor" id="WIFIExample6"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> uint8_t  u8ScanResultIdx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code" href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            uint8_t                     u8NumFoundAPs = <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">u8index</a>,pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code" href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">au8SSID</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code" href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a>(<a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga50637fc5aa85dde7bc568fde12b6a679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga50637fc5aa85dde7bc568fde12b6a679">&#9670;&nbsp;</a></span>m2m_wifi_request_scan_passive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_request_scan_passive </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Similar to <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a> but performs passive scanning instead of active scanning. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a>. With a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>, means to scan all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is not allowed in P2P or AP modes. It works only for STA mode (both connected or disconnected states).</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>. must be handled in the callback.</li>
<li>The <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a> <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to tenuM2mScanCh, with a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a> to scan all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is not allowed in P2P or AP modes. It works only for STA mode (both connected or disconnected states).</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>. must be handled in the callback.</li>
<li>The <a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> </dd>
<dd>
<a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a> </dd>
<dd>
<a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> </dd>
<dd>
<a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> </dd>
<dd>
<a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> </dd>
<dd>
<a class="el" href="group___w_l_a_n_a_p_i.html#ga4f0db0a89400730ce569aa9e13a3108b" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> </dd>
<dd>
<a class="el" href="group___w_l_a_n_a_p_i.html#ga2846d10a1d3b587b965ab7df1df0808c" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise. </dd></dl>

</div>
</div>
<a id="gaf270d6f64b704d8a13358ddf4c7f21a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf270d6f64b704d8a13358ddf4c7f21a9">&#9670;&nbsp;</a></span>m2m_wifi_set_scan_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_set_scan_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a> *&#160;</td>
          <td class="paramname"><em>ptstrM2MScanOption</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous API for configuring the behaviour of the WINC IC's network scanning functions. </p>
<p>Synchronous API for configuring the behaviour of the WINC network scanning functions.</p>
<p>This function sets the time configuration parameters for the scan operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptstrM2MScanOption;</td><td>Pointer to the structure holding the Scan Parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a></dd></dl>
<p>This function allows the application to tune the scanning behaviour of the WINC using the parameters described in <a class="el" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptstrM2MScanOption;</td><td>Pointer to the structure holding the Scan Parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a></dd></dl>
<p>This function allows the application to tune the scanning behaviour of the WINC IC using the parameters described in <a class="el" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptstrM2MScanOption;</td><td>Pointer to the structure holding the Scan Parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a> </dd></dl>

</div>
</div>
<a id="ga4d536e89952ac888305ca998d1a0e561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d536e89952ac888305ca998d1a0e561">&#9670;&nbsp;</a></span>m2m_wifi_set_scan_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_set_scan_region </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ScanRegion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous API for configuring the regulatory restrictions that may affect the WINC ICs scanning behaviour. </p>
<p>Synchronous API for configuring the regulatory restrictions that may affect the WINC scanning behaviour.</p>
<p>This function sets a property called the scan region, a parameter that affects the range of channels that the WINC IC may legally scan given a geographic region.</p>
<p>For 2.4GHz, supported in the current release, the requested scan region can't exceed the maximum number of channels (14).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ScanRegion</td><td>ASIA NORTH_AMERICA</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a></dd></dl>
<p>This function sets a property called the scan region, a parameter that affects the range of channels that the WINC may legally scan given a geographic region.</p>
<p>For 2.4GHz, supported in the current release, the requested scan region cannot exceed the maximum number of channels (14).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ScanRegion</td><td><a class="el" href="group___wlan_enums.html#gga7ffc49398ba597866801fd1e847a4183a32a37613e77fb416d0995b8612262bea">ASIA</a> <a class="el" href="group___wlan_enums.html#gga7ffc49398ba597866801fd1e847a4183a66b9054cf247c2d2a24ac27d7ae6eb72">EUROPE</a> <a class="el" href="group___wlan_enums.html#gga7ffc49398ba597866801fd1e847a4183a6a118305aab2bd0ff82e4d51f1898753">NORTH_AMERICA</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga7ffc49398ba597866801fd1e847a4183">tenuM2mScanRegion</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a></dd></dl>
<p>This function sets a property called the scan region, a parameter that affects the range of channels that the WINC IC may legally scan given a geographic region.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ScanRegion</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga7ffc49398ba597866801fd1e847a4183">tenuM2mScanRegion</a> <a class="el" href="group___w_l_a_n_a_p_i.html#ga2af5f45922ebf76a92d108a2561cb7c9" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="astructtstr_m2m_scan_done_html_a0ef4a791897fea110b8b666cb3603ad4"><div class="ttname"><a href="structtstr_m2m_scan_done.html#a0ef4a791897fea110b8b666cb3603ad4">tstrM2mScanDone::u8NumofCh</a></div><div class="ttdeci">uint8_t u8NumofCh</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1782</div></div>
<div class="ttc" id="astructtstr_m2m_scan_done_html_a6c193da5d97e4bc4d4b74b1d10224158"><div class="ttname"><a href="structtstr_m2m_scan_done.html#a6c193da5d97e4bc4d4b74b1d10224158">tstrM2mScanDone::s8ScanState</a></div><div class="ttdeci">int8_t s8ScanState</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1785</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a></div><div class="ttdoc">Wi-Fi Scan Result.</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1820</div></div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_ga2846d10a1d3b587b965ab7df1df0808c"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#ga2846d10a1d3b587b965ab7df1df0808c">m2m_wifi_req_scan_result</a></div><div class="ttdeci">int8_t m2m_wifi_req_scan_result(uint8_t index)</div><div class="ttdoc">Reads the AP information from the Scan Result list with the given index, the response received in wif...</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:1389</div></div>
<div class="ttc" id="agroup__m2m__wifi_html_ga13d5fa7a0c71fd59bbf36a61923835cc"><div class="ttname"><a href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">tstrWifiInitParam::pfAppWifiCb</a></div><div class="ttdeci">tpfAppWifiCb pfAppWifiCb</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:294</div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637"><div class="ttname"><a href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a></div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1250</div></div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_ga2af5f45922ebf76a92d108a2561cb7c9"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#ga2af5f45922ebf76a92d108a2561cb7c9">m2m_wifi_request_scan</a></div><div class="ttdeci">int8_t m2m_wifi_request_scan(uint8_t ch)</div><div class="ttdoc">Asynchronous API to request the WINC IC to scan for networks.</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:1069</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a5c388246b5003fc93347a9ae5483c605"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a5c388246b5003fc93347a9ae5483c605">tstrM2mWifiscanResult::u8ch</a></div><div class="ttdeci">uint8_t u8ch</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1830</div></div>
<div class="ttc" id="agroup___w_l_a_n_e_v_t_s_html_ga4f0db0a89400730ce569aa9e13a3108b"><div class="ttname"><a href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a></div><div class="ttdeci">int8_t m2m_wifi_handle_events(void)</div><div class="ttdoc">Synchronous M2M event handler function.</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:497</div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a></div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:862</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_ae6b97d5694589519be53843549160440"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#ae6b97d5694589519be53843549160440">tstrM2mWifiscanResult::au8BSSID</a></div><div class="ttdeci">uint8_t au8BSSID[6]</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1833</div></div>
<div class="ttc" id="astructtstr_m2m_scan_done_html"><div class="ttname"><a href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a></div><div class="ttdoc">Wi-Fi Scan Result.</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1781</div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_ga9ef27ba27aafdd1aa3a79d3ba2c36b8f"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a></div><div class="ttdeci">#define M2M_SUCCESS</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/common/nm_common.h:48</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_ac4df510b47a5063b89d914661501950e"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#ac4df510b47a5063b89d914661501950e">tstrM2mWifiscanResult::s8rssi</a></div><div class="ttdeci">int8_t s8rssi</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1824</div></div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_ga1638306107bf997ec4df62a473dba3b4"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#ga1638306107bf997ec4df62a473dba3b4">m2m_wifi_get_num_ap_found</a></div><div class="ttdeci">uint8_t m2m_wifi_get_num_ap_found(void)</div><div class="ttdoc">Reads the number of AP's found in the last Scan Request, The function read the number of AP's from gl...</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:1409</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a0d4991e0f7085ba51f6a88cfc5fb9542"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a0d4991e0f7085ba51f6a88cfc5fb9542">tstrM2mWifiscanResult::u8AuthType</a></div><div class="ttdeci">uint8_t u8AuthType</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1827</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a8381f3dec44d90cbe973d6793cf310a2"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a8381f3dec44d90cbe973d6793cf310a2">tstrM2mWifiscanResult::u8index</a></div><div class="ttdeci">uint8_t u8index</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1821</div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a></div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:868</div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a14a2515640591cec0c4763a8a4fbf37a"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a14a2515640591cec0c4763a8a4fbf37a">tstrM2mWifiscanResult::au8SSID</a></div><div class="ttdeci">uint8_t au8SSID[M2M_MAX_SSID_LEN]</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1836</div></div>
<div class="ttc" id="astructtstr_wifi_init_param_html"><div class="ttname"><a href="structtstr_wifi_init_param.html">tstrWifiInitParam</a></div><div class="ttdoc">Structure, holding the Wi-fi configuration attributes such as the wi-fi callback ,...</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:293</div></div>
<div class="ttc" id="agroup___w_l_a_n_i_n_i_t_html_ga66f5bf5f84f898bdd4453f2717a3deb5"><div class="ttname"><a href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a></div><div class="ttdeci">int8_t m2m_wifi_init(tstrWifiInitParam *pWifiInitParam)</div><div class="ttdoc">Synchronous API to initialize the WINC driver.</div><div class="ttdef"><b>Definition:</b> ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:475</div></div>
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
  <span class="stringliteral">  2019 Microchip Technology Inc. </span>
</body>
</html>
